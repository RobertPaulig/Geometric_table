# Контракты: `schema_version` и совместимость

Цель: закрепить правила совместимости JSON-контрактов и дисциплину релизов.

## Основные правила

1. `schema_version` обязателен во всех публичных JSON-артефактах (audit/decoys/pipeline/scores/report).
2. Контракт считается “замороженным” только если:
   - есть документ контракта (в `docs/contracts/*` или эквивалент),
   - есть backward-compat тест(ы),
   - есть явный указатель на контракт в `CONTEXT.md` и `docs/99_index.md`.
3. Изменения без нарушения совместимости не требуют увеличения major.

## Что считается breaking change

- удаление/переименование ключей в JSON;
- изменение типов/семантики существующих ключей;
- изменение структуры вложенных блоков без сохранения старых полей.

## Что делать при breaking

1. Увеличить major в `schema_version` (например, `hetero_pipeline.v2`).
2. Обновить `CHANGELOG.md` и задокументировать миграцию.
3. При необходимости — оставить backward-compatible режим или предоставить конвертер.

